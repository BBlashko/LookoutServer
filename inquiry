import bluetooth

print("performing inquiry...")

# nearby_devices = bluetooth.discover_devices(duration=5, lookup_names=True, flush_cache=True)
#
# print("found %d devices" % len(nearby_devices))
#
# for addr, name in nearby_devices:
#     try:
#         print("  %s - %s" % (addr, name))
#     except UnicodeEncodeError:
#         print("  %s - %s" % (addr, name.encode('utf-8', 'replace')))
target_name = "My Phone"
target_address = None
while True:
    nearby_devices = bluetooth.discover_devices()

    for bdaddr in nearby_devices:
        print bdaddr
        if target_name == bluetooth.lookup_name( bdaddr ):
            target_address = bdaddr
            break